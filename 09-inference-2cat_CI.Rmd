# Winter Sports Helmet Use and Head Injuries

## Learning objectives

* Assess the conditions to use the standard normal distribution for a difference in proportions

* Create and interpret a confidence interval for the difference in proportions

## Terminology review
In today's activity, we will use theory-based methods to analyze two categorical variables. Some terms covered in this activity are:

???


* Standard normal distribution

* Independence and success-failure conditions

* Type 1 and Type 2 errors

* Decisions

To review these concepts, see Chapter 5 in your textbook.

\newpage

## Helmet use and head injuries

In activity 8, we found very strong evidence that helmet use is associated with a reduction in head injury for skiers and snowboarders.  In this activity we will estimate the parameter of interest, the difference in true proportion of skiers and snowboarders with head injuries for those who wore helmets and those that did not.


In "Helmet Use and Risk of Head Injuries in Alpine Skiers and Snowboarders" by Sullheim et. al., in the *Journal of the American Medical Association*, Vol. 295, No. 8 (2006), we can see the summary results from a random sample 3562 skiers and snowboarders involved in accidents in the two-way table below. Estimate the difference in true proportion of skiers and snowboarders with head injuries for those who wore helmets and those that did not. 

|                | Helmet Use | No Helmet Use | Total |
|:--------------:|:----------:|:-------------:|:-----:|
| Head Injury    |     96     |      480      |  576  |
| No Head Injury |     656    |      2330     |  2986 |
| Total          |     752    |      2810     |  3562 |

These counts can be found in `R` by using the `count()` function:
```{r, echo=TRUE, warning=FALSE, message=FALSE, collapse=FALSE}
injury <- read.csv("data/head_injury.csv") # Read data set in
injury <- # Write over original data with the following
  injury %>% # Pipe data set into
  mutate(Helmet <- factor(Helmet),
         Injury <- factor(Injury)) # Convert to factors

injury %>% group_by(Helmet) %>% count(Injury)
```


### Vocabulary review {-}

1.  Report the point estimate for this study.  Use helmet use minus no helmet use as the order of subtraction.

\vspace{0.4in}

2. Write the conclusion for the study from Activity 8.

\vspace{1in}

3. Do you expect the 95% confidence interval to contain the null value of zero?  Explain your answer.

\vspace{1in}


### Use statistical analysis methods to draw inferences from the data {-}

To test the null hypothesis we could use simulation methods as we did with a single categorical variable. In this activity we will focus on theory-based methods.  Like with a single proportion, the difference in proportions can be mathematically modeled using the normal distribution if certain conditions are met.

Conditions for the sample distribution of $\hat{p}_1-\hat{p}_2$:

* Independence: The data are independent within and between the two groups.

* Success-Failure Condition: The success-failure condition holds for each group.


4. Is the success-failure condition to find the confidence interval met for each group?  Explain your answer.

\vspace{1in}

To find a confidence interval for the difference in proportions we will add and subtract the margin of error from the point estimate to find the two endpoints.

 $$\hat{p}_1-\hat{p}_2\pm z^*SE(\hat{p}_1-\hat{p}_2), \text{where}$$
 
 $$SE(\hat{p}_1-\hat{p}_2) = \sqrt{\left(\frac{\hat{p}_1 (1-\hat{p}_1)}{n_1}+\frac{\hat{p}_2 (1-\hat{p}_2)}{n_2}\right)}$$
 
Note that the formula changes when calculating the variability around the statistic in order to calculate a confidence interval!  Here, use the sample proportions for each group to calculate the standard error for the difference in proportions.


5. Calculate the standard error for a difference in proportions create a 95% confidence interval.  

\vspace{1in}

The $z^*$ multiplier is found under the standard normal distribution. We find the values that encompass the middle 95% of the distribution.  If 95\% of the standard normal distribution should be in the middle, that leaves 5\% in the tails, or 2.5\% in each tail.  The qnorm function in `R` will tell us the $z^*$ value for the desired percentile (in this case, 95\% + 2.5\% = 97.5\% percentile). 

```{r, echo=TRUE, collapse=FALSE}
qnorm(0.975) # Multiplier for 95% confidence interval
```

6. Using the multiplier of $z^*$ = 1.96, calculate the 95% confidence interval for the difference in true proportion of head injuries for those that used helmets minus those who did not. 

\vspace{1in}

7. Interpret the confidence interval found in question 6 in context of the problem.

\vspace{1in}

8.  
24. Write a paragraph summarizing the results of the study.  Be sure to describe:

* Summary statistic

* Test statistic and interpretation

* P-value and interpretation

* Conclusion (written to answer the research question)

* Confidence interval and interpretation

* Scope of inference

\vspace{2in}


### ??????? {-}


\newpage

## Out of Class Activity

The remaining questions cover simulation methods for creating the bootstrap distribution to find the confidence interval. Use section 5.4.3 in the textbook and the TwoPropSim video to complete the following questions.

???.  To create the bootstrap distribution, we will use the two proportion bootstrap CI.  We will need to enter the response variable name and the explanatory name for the formula, the dataset name identified above, the first outcome for the order of subtraction, number of repetitions, the outcome that is a success, and the direction of the alternative hypothesis.

The response variable name is Outcome and the explanatory variable name is Helmet.

What values should be entered for each of the following into the simulation to create a 95% confidence interval?

\vspace{.2in}
* First in Subtraction (What is the outcome for the explanatory variable that is used as first in the order of subtraction):

\vspace{.2in}
* Response Value Numerator (What is the outcome for the response variable that is considered a success?):

\vspace{.2in}
* Number of repetitions:

\vspace{.2in}
* Confidence Level:

\vspace{.2in}

The following `R` code produced the bootstrap distribution with 1000 simulations that follows.  Check that your answers to question 30 match the code inputs.

```{r}
two_proportion_bootstrap_CI(formula = Outcome ~ Helmet, 
                            data=injury, #name of dataset
                            first_in_subtraction = "Yes", #order of subtraction: enter the name of Group 1
                            response_value_numerator = "Head Injury", #define which outcome is a success 
                            number_repetitions = 1000, #always use a minimum of 1000 repetitions
                            confidence_level = 0.95) #enter the level of confidence as a decimal

```



## Additional notes

Use this space to summarize your thoughts and take additional notes on today's activity.
